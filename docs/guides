# Testing Guide - iKid App

Denne guiden hjelper deg med å teste iKid-appen enkelt og systematisk.

## Forutsetninger

Før du starter testing, sørg for at du har:

1. ✅ Node.js installert (v18 eller nyere)
2. ✅ npm installert
3. ✅ Moderne nettleser (Chrome, Firefox, Edge, Safari)
4. ✅ Firebase-prosjekt opprettet og konfigurert

## Steg 1: Installer avhengigheter

```bash
npm install
```

## Steg 2: Konfigurer Firebase

1. Gå til [Firebase Console](https://console.firebase.google.com/)
2. Opprett et nytt prosjekt (eller bruk eksisterende)
3. Aktiver **Authentication** med Email/Password
4. Aktiver **Firestore Database** (velg EØS-region, f.eks. europe-west1)
5. Kopier Firebase-konfigurasjonen

### Oppdater Firebase-konfigurasjon

Opprett en `.env.local` fil i rot-mappen og legg til Firebase-nøklene:

```env
VITE_FIREBASE_API_KEY=ditt-api-key
VITE_FIREBASE_AUTH_DOMAIN=ditt-prosjekt.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=ditt-prosjekt-id
VITE_FIREBASE_STORAGE_BUCKET=ditt-prosjekt.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=ditt-sender-id
VITE_FIREBASE_APP_ID=ditt-app-id
```

**Viktig:** `.env.local` er allerede i `.gitignore` og vil ikke bli pushet til GitHub.

## Steg 3: Start utviklingsserveren

```bash
npm run dev
```

Serveren starter på http://localhost:3000

## Steg 4: Åpne appen i nettleseren

Åpne nettleseren din og gå til:
- **http://localhost:3000**

## Steg 5: Test-scenarier

### Test 1: Registrering og innlogging

**Mål:** Test at brukere kan registrere seg og logge inn

1. Åpne appen
2. Trykk på "Registrer"
3. Fyll ut:
   - E-post: `test@example.com`
   - Passord: `Test1234!`
   - Navn: `Test Bruker`
   - Telefon: `12345678`
   - Rolle: Velg "Foreldre"
4. Trykk "Registrer"
5. Logg ut
6. Logg inn med samme konto

**Forventet resultat:** 
- ✅ Registrering fungerer
- ✅ Innlogging fungerer
- ✅ Du ser hovedskjermen etter innlogging

---

### Test 2: Innkryssing (Foreldre)

**Mål:** Test at foreldre kan krysse inn barn

**Forutsetning:** Du må ha et barn knyttet til din bruker (se Test 6 for å legge til barn)

1. Logg inn som foreldre
2. Gå til "Kryss inn"-fanen
3. Velg ditt barn fra listen
4. Trykk "Kryss inn"
5. Gå tilbake til "Oversikt"

**Forventet resultat:**
- ✅ Barnet vises som "Til stede" i oversikten
- ✅ Status-badge er grønn
- ✅ Tidspunkt for innkryssing vises

---

### Test 3: Utkryssing (Foreldre)

**Mål:** Test at foreldre kan krysse ut barn

1. Gå til "Kryss ut"-fanen
2. Velg ditt barn (som må være krysset inn)
3. Trykk "Kryss ut"
4. Gå tilbake til "Oversikt"

**Forventet resultat:**
- ✅ Barnet vises som "Hentet" i oversikten
- ✅ Status-badge er oransje
- ✅ Tidspunkt for utkryssing vises

---

### Test 4: Oversikt og søk

**Mål:** Test oversiktsskjermen og søkefunksjonen

1. Gå til "Oversikt"-fanen
2. Test søkefeltet:
   - Skriv inn et barns navn
   - Verifiser at listen filtreres
3. Test statusfilter:
   - Trykk på "Alle", "Til stede", "Hentet"
   - Verifiser at listen filtreres korrekt

**Forventet resultat:**
- ✅ Alle barn vises (for ansatte) eller kun egne barn (for foreldre)
- ✅ Søk fungerer
- ✅ Filtrering fungerer

---

### Test 5: Profilvisning

**Mål:** Test at foreldre kan se barnets profil

1. Gå til "Mitt barn"-fanen
2. Verifiser at barnets informasjon vises:
   - Navn
   - Fødselsdato og alder
   - Allergier (hvis oppgitt)
   - Notater (hvis oppgitt)

**Forventet resultat:**
- ✅ All informasjon vises korrekt
- ✅ Layout ser bra ut

---

### Test 6: Admin-funksjoner (Kun for ansatte/admin)

**Mål:** Test admin-funksjoner

**Forutsetning:** Logg inn som ansatt eller admin

#### 6a: Legg til barn
1. Gå til "Innstillinger" → "Admin" → "Legg til barn"
2. Fyll ut:
   - Fornavn: `Test`
   - Etternavn: `Barn`
   - Fødselsdato: `2020-01-01`
3. Trykk "Lagre"
4. Verifiser at barnet vises i oversikten

#### 6b: Knytt foreldre til barn
1. Gå til "Knytt foreldre"
2. Velg barn
3. Velg foreldre (fra søk)
4. Trykk "Knytt"
5. Verifiser at foreldre kan se barnet i sin oversikt

#### 6c: Legg til ansatt
1. Gå til "Legg til ansatt"
2. Fyll ut ansatt-informasjon
3. Trykk "Lagre"
4. Verifiser at ansatt kan logge inn

---

### Test 7: Kalender

**Mål:** Test kalenderfunksjonen

1. Gå til "Kalender"-fanen
2. For ansatte: Trykk "Legg til hendelse"
3. Fyll ut:
   - Tittel: `Test hendelse`
   - Type: Velg en type
   - Dato og tid: Velg fremtidig dato
   - Beskrivelse: `Dette er en test`
4. Trykk "Lagre"
5. Verifiser at hendelsen vises i listen
6. Test sletting: Hold inne på hendelsen og velg "Slett"

**Forventet resultat:**
- ✅ Hendelser vises korrekt
- ✅ Legg til fungerer (kun for ansatte)
- ✅ Sletting fungerer (kun for ansatte)

---

### Test 8: Logger

**Mål:** Test loggvisning

1. Gå til "Logger"-fanen
2. Verifiser at alle inn/utkryssinger vises
3. Test søk: Skriv inn et barns navn
4. Test filter: Trykk på "Kryss inn" eller "Kryss ut"
5. For ansatte: Test "Eksporter"-knappen

**Forventet resultat:**
- ✅ Logger vises korrekt
- ✅ Søk fungerer
- ✅ Filtrering fungerer
- ✅ Eksport fungerer (for ansatte)

---

### Test 9: Innstillinger

**Mål:** Test innstillingsskjermen

1. Gå til "Innstillinger"-fanen
2. Test språkvelger:
   - Bytt til engelsk
   - Verifiser at UI endres
   - Bytt tilbake til norsk
3. Test tema:
   - Bytt til dark mode
   - Verifiser at farger endres
   - Bytt tilbake til light mode
4. Test oppdatering av brukerinfo:
   - Trykk "Rediger"
   - Endre navn eller telefon
   - Trykk "Lagre"
   - Verifiser at endringer er lagret
5. Test endre passord:
   - Skriv inn gammelt passord
   - Skriv inn nytt passord
   - Bekreft nytt passord
   - Trykk "Endre passord"
6. Test logg ut:
   - Trykk "Logg ut"
   - Verifiser at du kommer til innloggingsskjermen

**Forventet resultat:**
- ✅ Alle innstillinger fungerer
- ✅ Endringer lagres korrekt

---

### Test 10: Flerspråklig støtte

**Mål:** Test at appen fungerer på alle språk

1. Gå til "Innstillinger"
2. Test hvert språk:
   - Norsk
   - English
   - Polski
3. Gå gjennom alle skjermer for hvert språk
4. Verifiser at:
   - Alle tekster er oversatt
   - Layout ser bra ut
   - Ingen tekst går utenfor skjermen

**Forventet resultat:**
- ✅ Alle språk fungerer
- ✅ Ingen tekster mangler
- ✅ Layout er korrekt

---

### Test 11: Dark/Light Mode

**Mål:** Test tema-funksjonen

1. Gå til "Innstillinger"
2. Test alle tema-alternativer:
   - Light mode
   - Dark mode
   - System (følger enhetens innstillinger)
3. Gå gjennom alle skjermer for hvert tema
4. Verifiser at:
   - Farger ser bra ut
   - Kontraster er gode
   - Tekst er lesbar

**Forventet resultat:**
- ✅ Alle temaer fungerer
- ✅ God lesbarhet i alle temaer

---

### Test 12: Validering og feilhåndtering

**Mål:** Test at validering fungerer

1. Test ugyldig e-post:
   - Prøv å registrere med `ikke-en-epost`
   - Forvent feilmelding
2. Test svakt passord:
   - Prøv å registrere med `123`
   - Forvent feilmelding
3. Test tomme felt:
   - Prøv å krysse inn uten å velge barn
   - Forvent feilmelding
4. Test dobbel innkryssing:
   - Krysse inn et barn som allerede er krysset inn
   - Forvent feilmelding
5. Test utkryssing uten innkryssing:
   - Prøv å krysse ut et barn som ikke er krysset inn
   - Forvent feilmelding

**Forventet resultat:**
- ✅ Alle valideringer fungerer
- ✅ Tydelige feilmeldinger vises

---

## Rask test-checkliste

For en rask test, sjekk at disse fungerer:

- [ ] Registrering og innlogging
- [ ] Innkryssing av barn
- [ ] Utkryssing av barn
- [ ] Oversikt viser korrekt status
- [ ] Søk og filtrering fungerer
- [ ] Profilvisning fungerer
- [ ] Kalender fungerer (for ansatte)
- [ ] Logger vises korrekt
- [ ] Språkbytte fungerer
- [ ] Tema-bytte fungerer
- [ ] Innstillinger kan oppdateres

## Feilsøking

### Appen starter ikke
- Sjekk at utviklingsserveren kjører (`npm run dev`)
- Sjekk at Firebase er konfigurert i `.env.local`
- Sjekk at port 3000 ikke er opptatt
- Prøv å slette `node_modules` og kjør `npm install` på nytt

### Firebase-feil
- Verifiser at Firebase-konfigurasjonen er korrekt
- Sjekk at Authentication er aktivert
- Sjekk at Firestore er aktivert

### Navigasjonsfeil
- Sjekk at alle skjermer er registrert i `src/navigation/AppRouter.tsx`
- Verifiser at alle imports er korrekte
- Sjekk nettleserens konsoll (F12) for feilmeldinger

## Neste steg etter testing

Når testing er fullført:

1. Dokumenter eventuelle feil funnet
2. Test på ulike nettlesere (Chrome, Firefox, Edge, Safari)
3. Test responsivt design (mobil, tablet, desktop)
4. Test PWA-installasjon på ulike enheter
5. Test ytelse med mange barn/logger
6. Gjennomfør sikkerhetstesting

## Support

Hvis du støter på problemer under testing, sjekk:
- `README.md` for generell informasjon
- `docs/FIREBASE_SETUP.md` for Firebase-konfigurasjon
- `docs/DEPLOYMENT.md` for deployment-informasjon

